# é …ç›®æ¸…ç†è…³æœ¬å»ºè­°

## ğŸ¯ è‡ªå‹•åŒ–æ¸…ç†è…³æœ¬

### 1. Console.log æ¸…ç†è…³æœ¬
```bash
# æ‰¾åˆ°æ‰€æœ‰åŒ…å« console.log çš„æ–‡ä»¶
find src -name "*.tsx" -o -name "*.ts" | xargs grep -l "console\.log"

# ä½¿ç”¨ sed ç§»é™¤ console.log èªå¥ï¼ˆè¬¹æ…ä½¿ç”¨ï¼‰
find src -name "*.tsx" -o -name "*.ts" -exec sed -i '' '/console\.log/d' {} \;

# æ›´å®‰å…¨çš„æ–¹æ³•ï¼šå…ˆå‚™ä»½å†æ¸…ç†
find src -name "*.tsx" -o -name "*.ts" -exec cp {} {}.backup \;
find src -name "*.tsx" -o -name "*.ts" -exec sed -i '' '/console\.log/d' {} \;
```

### 2. æ¨¡æ“¬æ•¸æ“šæ¸…ç†
```bash
# æœç´¢æ¨¡æ“¬æ•¸æ“š
grep -r "mock\|å‡è³‡æ–™\|æ¨¡æ“¬" src/ --include="*.tsx" --include="*.ts"

# æœç´¢ TODO æ¨™è¨˜
grep -r "TODO\|FIXME" src/ --include="*.tsx" --include="*.ts"
```

### 3. æœªä½¿ç”¨çš„ Import æ¸…ç†
```bash
# å®‰è£ eslint-plugin-unused-imports
npm install --save-dev eslint-plugin-unused-imports

# åœ¨ eslint.config.js ä¸­æ·»åŠ è¦å‰‡
# ç„¶å¾ŒåŸ·è¡Œ
npx eslint src --fix
```

## ğŸ“‹ æ‰‹å‹•æ¸…ç†æª¢æŸ¥æ¸…å–®

### é«˜å„ªå…ˆç´šæ¸…ç†é …ç›®

#### 1. èª¿è©¦ä»£ç¢¼æ¸…ç†
- [ ] `src/pages/Login.tsx` 
  - ç§»é™¤ Azure SSO ç›¸é—œçš„ console.log
  - ç§»é™¤æ¨¡æ“¬ API é©—è­‰å»¶é²
  
- [ ] `src/components/ActivityManagementPage/ActivityManagement.tsx`
  - ç§»é™¤ API å›æ‡‰çš„ console.log
  - ç§»é™¤æœå°‹çµæœçš„ console.log

- [ ] `src/components/ActivityManagementPage/CaseRegistrationReview.tsx`
  - ç§»é™¤æ‰€æœ‰è³‡æ–™è™•ç†çš„ console.logï¼ˆç´„15å€‹ï¼‰
  - ç§»é™¤èª¿è©¦è³‡è¨Šçš„ console.log

- [ ] `src/components/CaseManagementPage/AddCaseTab.tsx`
  - ä¿®å¾©è¡¨å–®æäº¤çš„ console.log èªå¥ï¼ˆèªæ³•éŒ¯èª¤ï¼‰

#### 2. æ¨¡æ“¬æ•¸æ“šæ¸…ç†
- [ ] `src/components/CalendarPage/index.tsx`
  - ç§»é™¤æˆ–é‡æ§‹ `mockCaseDatabase`
  - é€£æ¥åˆ°çœŸå¯¦çš„ API æœå‹™

- [ ] `src/components/AuthProvider.tsx`
  - ç§»é™¤ `mockUser` æ•¸æ“š
  - å¯¦ç¾çœŸæ­£çš„ Azure AD é›†æˆ

- [ ] `src/components/SuppliesManagementPage/InventoryTab.tsx`
  - ç§»é™¤ `mockCategories` å‚™ç”¨æ•¸æ“š
  - ç¢ºä¿ç¸½æ˜¯ä½¿ç”¨ API æ•¸æ“š

#### 3. TODO æ¨™è¨˜è™•ç†
- [ ] Azure AD SSO ç™»å…¥åŠŸèƒ½
- [ ] çœŸæ­£çš„èº«ä»½é©—è­‰é‚è¼¯
- [ ] ä»¤ç‰Œç²å–é‚è¼¯
- [ ] æœå°‹åŠŸèƒ½é‚è¼¯å®Œå–„
- [ ] ç‰©è³‡éœ€æ±‚æäº¤é‚è¼¯

### ä¸­å„ªå…ˆç´šæ¸…ç†é …ç›®

#### 1. ä¸»é¡Œä½¿ç”¨çµ±ä¸€åŒ–
```typescript
// æª¢æŸ¥ä¸¦çµ±ä¸€ä½¿ç”¨æ¨¡å¼
// å¥½çš„åšæ³•ï¼š
import { THEME_COLORS } from '../styles/theme';
const styles = {
  color: THEME_COLORS.TEXT_PRIMARY,
  backgroundColor: THEME_COLORS.BACKGROUND_CARD
};

// é¿å…çš„åšæ³•ï¼š
const styles = {
  color: '#1f2937',  // ç¡¬ç·¨ç¢¼é¡è‰²
  backgroundColor: '#ffffff'
};
```

#### 2. æœªä½¿ç”¨çš„ Import æ¸…ç†
```bash
# æª¢æŸ¥æœªä½¿ç”¨çš„ import
npx eslint src --ext .ts,.tsx --rule "no-unused-vars: error"

# æˆ–ä½¿ç”¨ TypeScript ç·¨è­¯å™¨
npx tsc --noEmit --strict
```

#### 3. éŒ¯èª¤è™•ç†æ¨™æº–åŒ–
```typescript
// æ¨™æº–åŒ–éŒ¯èª¤è™•ç†æ¨¡å¼
const handleError = (error: unknown) => {
  if (error instanceof Error) {
    setError(error.message);
  } else {
    setError('æœªçŸ¥éŒ¯èª¤');
  }
};
```

## ğŸ”§ ESLint é…ç½®å„ªåŒ–

### 1. æ·»åŠ è‡ªå®šç¾©è¦å‰‡
```javascript
// eslint.config.js
export default [
  {
    rules: {
      'no-console': 'error',
      'no-unused-vars': 'error',
      '@typescript-eslint/no-unused-vars': 'error',
      'prefer-const': 'error',
      'no-var': 'error'
    }
  }
];
```

### 2. é æäº¤ Hook è¨­ç½®
```bash
# å®‰è£ husky
npm install --save-dev husky

# è¨­ç½®é æäº¤æª¢æŸ¥
npx husky install
npx husky add .husky/pre-commit "npm run lint"
```

## ğŸš€ è‡ªå‹•åŒ–æ¸…ç†è…³æœ¬

### æ¸…ç†è…³æœ¬ (cleanup.js)
```javascript
const fs = require('fs');
const path = require('path');

// éæ­¸æŸ¥æ‰¾æ–‡ä»¶
function findFiles(dir, ext) {
  const files = [];
  const items = fs.readdirSync(dir);
  
  for (const item of items) {
    const fullPath = path.join(dir, item);
    const stat = fs.statSync(fullPath);
    
    if (stat.isDirectory() && item !== 'node_modules') {
      files.push(...findFiles(fullPath, ext));
    } else if (stat.isFile() && item.endsWith(ext)) {
      files.push(fullPath);
    }
  }
  
  return files;
}

// æ¸…ç† console.log
function removeConsoleLogs(filePath) {
  const content = fs.readFileSync(filePath, 'utf8');
  const cleanedContent = content.replace(/\s*console\.log\([^)]*\);?\s*/g, '');
  
  if (content !== cleanedContent) {
    fs.writeFileSync(filePath, cleanedContent);
    console.log(`æ¸…ç† ${filePath}`);
  }
}

// åŸ·è¡Œæ¸…ç†
const tsxFiles = findFiles('./src', '.tsx');
const tsFiles = findFiles('./src', '.ts');

[...tsxFiles, ...tsFiles].forEach(removeConsoleLogs);
```

### ä½¿ç”¨æ–¹æ³•
```bash
# 1. åŸ·è¡Œæ¸…ç†è…³æœ¬
node cleanup.js

# 2. æª¢æŸ¥èªæ³•éŒ¯èª¤
npm run build

# 3. ä¿®å¾© ESLint å•é¡Œ
npx eslint src --fix

# 4. æœ€çµ‚æª¢æŸ¥
npm run type-check
```

## ğŸ“Š æ¸…ç†å‰å¾Œå°æ¯”æª¢æŸ¥

### 1. Bundle å¤§å°æª¢æŸ¥
```bash
# æ¸…ç†å‰
npm run build
ls -la dist/

# æ¸…ç†å¾Œ
npm run build
ls -la dist/
```

### 2. ç·¨è­¯æ™‚é–“å°æ¯”
```bash
# æ¸¬é‡ç·¨è­¯æ™‚é–“
time npm run build
```

### 3. ä»£ç¢¼è³ªé‡æŒ‡æ¨™
```bash
# æª¢æŸ¥ä»£ç¢¼è¤‡é›œåº¦
npx eslint src --ext .ts,.tsx --format json > eslint-report.json

# æª¢æŸ¥ TypeScript éŒ¯èª¤
npx tsc --noEmit --strict 2>&1 | tee ts-errors.log
```

## ğŸ¯ ç‰¹å®šæ–‡ä»¶æ¸…ç†æŒ‡å—

### 1. CaseRegistrationReview.tsx
```typescript
// å•é¡Œï¼šå¤§é‡èª¿è©¦ console.log
// è§£æ±ºï¼šç§»é™¤æ‰€æœ‰èª¿è©¦èªå¥ï¼Œä¿ç•™éŒ¯èª¤è™•ç†

// åŸå§‹ä»£ç¢¼ï¼ˆéœ€è¦æ¸…ç†ï¼‰
console.log('ğŸ”„ é–‹å§‹è¼‰å…¥å€‹æ¡ˆå ±åè³‡æ–™...');
console.log('ğŸ“¦ APIå›æ‡‰åŸå§‹è³‡æ–™:', data);

// æ¸…ç†å¾Œçš„ä»£ç¢¼
const data = await registrationService.getCaseRegistrations();
```

### 2. AuthProvider.tsx
```typescript
// å•é¡Œï¼šä½¿ç”¨æ¨¡æ“¬ç”¨æˆ¶æ•¸æ“š
// è§£æ±ºï¼šå¯¦ç¾çœŸæ­£çš„ Azure AD é›†æˆ

// åŸå§‹ä»£ç¢¼ï¼ˆéœ€è¦æ¸…ç†ï¼‰
const mockUser: User = {
  id: '1',
  name: 'Admin User',
  email: 'admin@example.com',
  role: 'admin'
};

// æ¸…ç†å¾Œçš„ä»£ç¢¼
const authenticateUser = async (credentials: LoginCredentials) => {
  // å¯¦éš›çš„ Azure AD èªè­‰é‚è¼¯
  const response = await azureAuth.login(credentials);
  return response.user;
};
```

### 3. CalendarPage/index.tsx
```typescript
// å•é¡Œï¼šä½¿ç”¨æ¨¡æ“¬æ¡ˆä¾‹æ•¸æ“šåº«
// è§£æ±ºï¼šé€£æ¥åˆ°çœŸå¯¦çš„ API

// åŸå§‹ä»£ç¢¼ï¼ˆéœ€è¦æ¸…ç†ï¼‰
const mockCaseDatabase = [
  { id: 'C001', name: 'å¼µå°æ˜', age: 25, contact: '0912345678' },
  // ...
];

// æ¸…ç†å¾Œçš„ä»£ç¢¼
const [caseDatabase, setCaseDatabase] = useState<CaseRecord[]>([]);

useEffect(() => {
  const loadCases = async () => {
    const cases = await caseService.getAllCases();
    setCaseDatabase(cases);
  };
  loadCases();
}, []);
```

## ğŸ“ æ¸…ç†å®Œæˆé©—è­‰

### 1. è‡ªå‹•æª¢æŸ¥è…³æœ¬
```bash
#!/bin/bash
echo "é–‹å§‹é …ç›®æ¸…ç†é©—è­‰..."

# æª¢æŸ¥æ˜¯å¦é‚„æœ‰ console.log
if grep -r "console\.log" src/; then
  echo "âŒ ä»æœ‰ console.log èªå¥"
else
  echo "âœ… å·²æ¸…ç†æ‰€æœ‰ console.log"
fi

# æª¢æŸ¥æ˜¯å¦é‚„æœ‰ TODO
if grep -r "TODO\|FIXME" src/; then
  echo "âš ï¸ ä»æœ‰ TODO æ¨™è¨˜"
else
  echo "âœ… å·²è™•ç†æ‰€æœ‰ TODO"
fi

# æª¢æŸ¥ç·¨è­¯ç‹€æ…‹
if npm run build; then
  echo "âœ… ç·¨è­¯æˆåŠŸ"
else
  echo "âŒ ç·¨è­¯å¤±æ•—"
fi

echo "æ¸…ç†é©—è­‰å®Œæˆ"
```

### 2. æ‰‹å‹•æª¢æŸ¥æ¸…å–®
- [ ] æ‰€æœ‰ console.log å·²ç§»é™¤
- [ ] æ‰€æœ‰æ¨¡æ“¬æ•¸æ“šå·²æ¸…ç†æˆ–é‡æ§‹
- [ ] æ‰€æœ‰ TODO å·²è™•ç†æˆ–è¨˜éŒ„
- [ ] é …ç›®èƒ½å¤ æ­£å¸¸ç·¨è­¯
- [ ] æ‰€æœ‰é é¢èƒ½å¤ æ­£å¸¸è¼‰å…¥
- [ ] ä¸»é¡Œä½¿ç”¨ä¸€è‡´æ€§
- [ ] æ²’æœ‰æœªä½¿ç”¨çš„ import
- [ ] éŒ¯èª¤è™•ç†æ¨™æº–åŒ–

## ğŸ”„ æŒçºŒç¶­è­·å»ºè­°

### 1. è¨­ç½® CI/CD æª¢æŸ¥
```yaml
# .github/workflows/code-quality.yml
name: Code Quality Check
on: [push, pull_request]
jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run ESLint
        run: npx eslint src --ext .ts,.tsx
      - name: Check for console.log
        run: |
          if grep -r "console\.log" src/; then
            echo "Console.log found in code"
            exit 1
          fi
```

### 2. å®šæœŸæ¸…ç†è¨ˆåŠƒ
- **æ¯é€±**ï¼šæª¢æŸ¥æ–°çš„ console.log èªå¥
- **æ¯æœˆ**ï¼šå¯©æŸ¥ TODO æ¨™è¨˜é€²åº¦
- **æ¯å­£**ï¼šå…¨é¢ä»£ç¢¼è³ªé‡æª¢æŸ¥

---

*éµå¾ªæ­¤æ¸…ç†æŒ‡å—å¯ç¢ºä¿ä»£ç¢¼åº«ä¿æŒæ•´æ½”ã€é«˜æ•ˆä¸”æ˜“æ–¼ç¶­è­·ã€‚* 